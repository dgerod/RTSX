// qnorm.sci  Quaternion magnitude
// www.controlsystemslab.com  Sep 2012
//
 // QN = Q.norm(Q) is the scalar norm or magnitude of the quaternion Q.  
 //
 // Notes::
 // - This is the Euclidean norm of the quaternion written as a 4-vector.
 // - A unit-quaternion has a norm of one.

function normq = qnorm(q)
    nq = size(q,1);
    if nq==1 then
        v = q2vec(q);
        nq = 
        qi.s = q.s;
        qi.v = -q.v;
    else
        for i=1:nq
            qi(i).s = q(i).s;
            qi(i).v = -q(i).v;
        end
    end    
endfunction
